# üéâ –§—ñ–Ω–∞–ª—å–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Docker –¥–ª—è Strapi –∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –∑–æ–±—Ä–∞–∂–µ–Ω—å

## ‚úÖ –©–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

### 1. Docker Volume –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
```yaml
volumes:
  - ./uploads:/app/backend/public/uploads
```
**–í–∞–∂–ª–∏–≤–æ**: –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ —ñ –Ω–µ –≥—É–±–∏—Ç–∏ —ó—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### 2. –ü–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Docker
- ‚úÖ **Dockerfile**: –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è Sharp —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- ‚úÖ **docker-compose.yml**: Volume –¥–ª—è uploads + –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
- ‚úÖ **Strapi –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: Upload plugin –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é
- ‚úÖ **Sharp**: –î–æ–¥–∞–Ω–æ –¥–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

### –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
docker-compose logs -f strapi
```

### –ö—Ä–æ–∫ 2: –î–æ—Å—Ç—É–ø –¥–æ Strapi
- **–ê–¥–º—ñ–Ω–∫–∞**: http://localhost:1337/admin
- **API**: http://localhost:1337/api

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
flowershop3/
‚îú‚îÄ‚îÄ uploads/                    # üìÅ –õ–æ–∫–∞–ª—å–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
‚îÇ   ‚îú‚îÄ‚îÄ [timestamp]_image.jpg   # –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ [timestamp]_image_large.jpg  # –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –≤–µ—Ä—Å—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ [timestamp]_image_medium.jpg
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ public/
‚îÇ       ‚îî‚îÄ‚îÄ uploads/           # üîó –ó–≤'—è–∑–∞–Ω–æ –∑ ./uploads —á–µ—Ä–µ–∑ volume
‚îî‚îÄ‚îÄ docker-compose.yml         # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è volumes
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –†–æ–∑–º—ñ—Ä–∏ —Ñ–∞–π–ª—ñ–≤
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä**: 10MB
- **–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏**: JPG, PNG, GIF, WebP
- **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–∑–º—ñ—Ä–∞–º–∏

### Breakpoints (—Ä–æ–∑–º—ñ—Ä–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å)
- **xlarge**: 1920px
- **large**: 1000px  
- **medium**: 750px
- **small**: 500px
- **xsmall**: 64px

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### 1. –ß–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É Strapi
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:1337/admin
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Content Manager**
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π **Bouquet** –∞–±–æ **Singleflower**
4. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ñ–∞–π–ª –∑'—è–≤–∏–≤—Å—è –≤ `./uploads/` –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ volume
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª–∏ –≤ uploads
ls -la uploads/

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ
docker exec -it flowershop3-strapi-1 ls -la /app/backend/public/uploads/
```

## üîÑ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ –ø–µ—Ä–µ–±—É–¥–æ–≤–æ—é
docker-compose down
docker-compose up -d --build
```

### –û—á–∏—â–µ–Ω–Ω—è
```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down

# –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞ –æ–±—Ä–∞–∑–∏
docker-compose down --rmi all

# –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à Docker
docker system prune -f
```

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "EPERM: operation not permitted"
```bash
# –†—ñ—à–µ–Ω–Ω—è: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ –Ω–æ–≤–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏
docker-compose down
docker-compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Sharp module not found"
```bash
# –†—ñ—à–µ–Ω–Ω—è: –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose build --no-cache
docker-compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ volume
docker-compose exec strapi ls -la /app/backend/public/uploads/

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
docker-compose exec strapi ls -la /app/backend/public/
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
# –í—Å—ñ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker-compose logs -f strapi

# –û—Å—Ç–∞–Ω–Ω—ñ 100 —Ä—è–¥–∫—ñ–≤
docker-compose logs --tail=100 strapi
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
docker stats flowershop3-strapi-1

# –†–æ–∑–º—ñ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker images flowershop3-strapi
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

‚úÖ **Strapi –∑–∞–ø—É—â–µ–Ω–∏–π** –Ω–∞ http://localhost:1337  
‚úÖ **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å** –ø—Ä–∞—Ü—é—î –±–µ–∑ –ø–æ–º–∏–ª–æ–∫  
‚úÖ **Volume –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π** - –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ **Sharp –ø—Ä–∞—Ü—é—î** - –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–∞  
‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É** –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
‚úÖ **–ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ EPERM** –∞–±–æ Sharp  

## üÜò –Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏**: `docker-compose logs -f strapi`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å**: `docker-compose restart`
3. **–ü–µ—Ä–µ–±—É–¥—É–π—Ç–µ**: `docker-compose build --no-cache && docker-compose up -d`
4. **–û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à**: `docker system prune -f`

---

**üéâ –ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –±—É–∫–µ—Ç—ñ–≤ —Ç–∞ –æ–¥–∏–Ω–æ—á–Ω–∏—Ö –∫–≤—ñ—Ç—ñ–≤ –≤ –∞–¥–º—ñ–Ω—Ü—ñ Strapi –±–µ–∑ –ø–æ–º–∏–ª–æ–∫, —ñ –≤—Å—ñ —Ñ–∞–π–ª–∏ –±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `./uploads/`.














