// Using built-in fetch (Node.js 18+)
// Load environment variables from .env file
require('dotenv').config();

const STRAPI_URL = process.env.STRAPI_URL || process.env.NEXT_PUBLIC_API_URL || 'http://localhost:1337';
const STRAPI_TOKEN = process.env.STRAPI_API_TOKEN || '';

// 10 Букетів
const bouquets = [
  {
    name: 'Романтичний вечір',
    price: 850,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ніжний букет з червоних троянд та білих лілій, прикрашений зеленню еустом. Ідеальний вибір для романтичного вечора та вираження глибоких почуттів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Кожна троянда ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Білі лілії додають елегантності та чистоти образу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Букет ідеально підходить для весільних церемоній, ювілеїв та особливих романтичних моментів. Зелень еустом створює природний акцент та підкреслює красу квітів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням сучасних трендів у квітковому дизайні. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'large',
    color: 'chervonij',
    availableQuantity: 15
  },
  {
    name: 'Весняна свіжість',
    price: 650,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Яскравий букет з тюльпанів, нарцисів та гіацинтів. Насичений весняними кольорами та ароматами, що нагадують про пробудження природи.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Тюльпани різних відтінків створюють життєрадісну палітру, а нарциси додають сонячної енергії композиції. Гіацинти надають букету неперевершеного аромату.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет чудово підходить для весняних свят, днів народження та просто для підняття настрою. Кольори та аромати створюють атмосферу радості та оптимізму.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Кожна квітка ретельно відібрана за якістю та свіжістю. Букет оформлений з урахуванням гармонії кольорів та форми, що робить його ідеальним подарунком.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція доставляється в спеціальній упаковці, яка забезпечує збереження свіжості квітів під час транспортування.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'zhyovtyj',
    availableQuantity: 20
  },
  {
    name: 'Класична елегантність',
    price: 1200,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вишуканий букет з білих троянд та калл, доповнений аспарагусом. Символ чистоти, елегантності та високого смаку.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Білі троянди ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Калли додають вишуканості та унікальності образу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Букет ідеально підходить для весільних церемоній, офіційних подій та особливих моментів. Аспарагус створює природний акцент та підкреслює красу квітів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням класичних традицій квіткового дизайну. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет стане ідеальним подарунком для вираження поваги, вдячності та високих почуттів. Білий колір символізує чистоту та нові початку.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'bilyj',
    availableQuantity: 12
  },
  {
    name: 'Сонячна радість',
    price: 750,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Жвавий букет з соняшників, гербер та рудбекій. Насичений жовто-помаранчевими відтінками, що додають позитиву та енергії.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Соняшники створюють життєрадісну атмосферу та нагадують про літній день. Гербери різних відтінків додають яскравості та веселості композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Рудбекії доповнюють букет природною красою та гармонією кольорів. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет чудово підходить для днів народження, ювілеїв та просто для підняття настрою. Яскраві кольори створюють атмосферу радості та оптимізму.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена з урахуванням гармонії кольорів та форми, що робить її ідеальним подарунком. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'zhyovtyj',
    availableQuantity: 18
  },
  {
    name: 'Лавандова мрія',
    price: 900,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ніжний букет з лаванди, фіалок та бузку. Заспокійливий фіолетовий відтінок та приємний аромат створюють атмосферу гармонії.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Лаванда надає букету неперевершеного аромату та заспокійливих властивостей. Фіалки додають ніжності та вишуканості композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Бузок створює природний акцент та підкреслює красу квітів. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет ідеально підходить для романтичних моментів, весільних церемоній та особливих подій. Фіолетовий колір символізує мудрість та духовність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та ароматів. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'fioletovij',
    availableQuantity: 14
  },
  {
    name: 'Королівська велич',
    price: 1500,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Розкішний букет з бордових троянд, піонів та орхідей. Глибокий багатий колір та вишукана композиція для особливих моментів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Бордові троянди ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Піони додають розкішності та об\'єму букету.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Орхідеї надають букету екзотичності та вишуканості. Глибокий багатий колір символізує пристрасть, силу та велич.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Букет ідеально підходить для ювілеїв, офіційних подій та особливих романтичних моментів. Композиція створює атмосферу розкоші та елегантності.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням сучасних трендів у квітковому дизайні. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет стане ідеальним подарунком для вираження глибоких почуттів та поваги. Бордовий колір символізує пристрасть та силу.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'large',
    color: 'bordovyj',
    availableQuantity: 8
  },
  {
    name: 'Персиковий блаженство',
    price: 680,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'М\'який букет з персикових троянд та кремових піонів. Ніжні пастельні відтінки створюють теплу та затишну атмосферу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Персикові троянди ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Кремові піони додають ніжності та об\'єму букету.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ніжні пастельні відтінки створюють теплу та затишну атмосферу. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет чудово підходить для романтичних моментів, весільних церемоній та особливих подій. Пастельні кольори символізують ніжність та турботу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та форми. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'kremovyj',
    availableQuantity: 16
  },
  {
    name: 'Океанська свіжість',
    price: 720,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Свіжий букет з блакитних дельфініумів, гіпсофіли та білих хризантем. Нагадує про морський бриз та безмежність океану.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Дельфініуми створюють високу вертикальну лінію та надають букету структури. Гіпсофіла додає легкості та повітряності композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Білі хризантеми створюють контраст та підкреслюють красу блакитних квітів. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет чудово підходить для весільних церемоній, офіційних подій та особливих моментів. Блакитний колір символізує спокій та безмежність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та форми. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'golubyj',
    availableQuantity: 22
  },
  {
    name: 'Осіння палітра',
    price: 800,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Насичений букет з помаранчевих хризантем, червоних астр та жовтих георгинів. Відображає красу осінньої природи.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Помаранчеві хризантеми створюють теплу осінню палітру та нагадують про багатство природи. Червоні астри додають яскравості та енергії композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Жовті георгини доповнюють букет сонячними відтінками та створюють гармонію кольорів. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Цей букет чудово підходить для осінніх свят, днів народження та просто для створення затишної атмосфери. Кольори відображають красу осінньої природи.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та форми. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'oranzhevyj',
    availableQuantity: 19
  },
  {
    name: 'Рожева ніжність',
    price: 950,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Романтичний букет з рожевих троянд, піонів та еустом. Ніжні відтінки рожевого символізують кохання та турботу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Рожеві троянди ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Піони додають об\'єму та ніжності букету.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Еустоми створюють природний акцент та підкреслюють красу квітів. Ніжні відтінки рожевого символізують кохання, ніжність та турботу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Букет ідеально підходить для романтичних моментів, весільних церемоній та особливих подій. Композиція створює атмосферу ніжності та кохання.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та форми. Букет доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'bouquet',
    cardType: 'standart',
    color: 'rozhevyj',
    availableQuantity: 17
  }
];

// 5 Композицій
const compositions = [
  {
    name: 'Квіткова композиція "Елеганс"',
    price: 1100,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вишукана композиція в декоративній вазі з білих орхідей, калл та зеленої рослинності. Ідеальна для офісних приміщень та святкових подій.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Білі орхідеї ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Калли додають вишуканості та унікальності образу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Зелена рослинність створює природний акцент та підкреслює красу квітів. Декоративна ваза підкреслює елегантність композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція ідеально підходить для офісних приміщень, ресторанів та святкових подій. Білий колір символізує чистоту та елегантність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням сучасних трендів у квітковому дизайні. Доставляється в спеціальній упаковці для збереження свіжості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція стане ідеальним подарунком для вираження поваги, вдячності та високих почуттів. Білий колір символізує чистоту та нові початку.' }]
      }
    ],
    productType: 'composition',
    cardType: 'standart',
    color: 'bilyj',
    availableQuantity: 10
  },
  {
    name: 'Настільна композиція "Весна"',
    price: 550,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Компактна композиція з тюльпанів, нарцисів та м\'яти в круглій вазі. Чудово підходить для прикраси столу та створення весняного настрою.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Тюльпани різних відтінків створюють життєрадісну палітру, а нарциси додають сонячної енергії композиції. М\'ята надає букету неперевершеного аромату.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Кругла ваза підкреслює компактність та елегантність композиції. Кожна квітка ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція чудово підходить для прикраси столу, весняних свят та просто для створення затишної атмосфери. Кольори та аромати створюють атмосферу радості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням гармонії кольорів та форми. Доставляється в спеціальній упаковці для збереження свіжості.' }]
      }
    ],
    productType: 'composition',
    cardType: 'standart',
    color: 'zhyovtyj',
    availableQuantity: 25
  },
  {
    name: 'Підвісна композиція "Каскад"',
    price: 1300,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ефектна підвісна композиція з плюща, фіалок та білих троянд. Створює каскадний ефект, ідеальна для аркових конструкцій.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Плющ створює природний каскадний ефект та надає композиції об\'єму. Фіалки додають ніжності та вишуканості композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Білі троянди ретельно відібрані за якістю та свіжістю, щоб забезпечити довготривалу красу композиції. Кожна квітка ретельно відібрана за якістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція ідеально підходить для аркових конструкцій, весільних церемоній та особливих подій. Каскадний ефект створює атмосферу елегантності.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням сучасних трендів у квітковому дизайні. Доставляється в спеціальній упаковці для збереження свіжості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція стане ідеальним подарунком для вираження поваги, вдячності та високих почуттів. Білий колір символізує чистоту та елегантність.' }]
      }
    ],
    productType: 'composition',
    cardType: 'standart',
    color: 'miks',
    availableQuantity: 6
  },
  {
    name: 'Композиція "Мінімалізм"',
    price: 850,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Сучасна мінімалістична композиція з монстера, сансев\'єрії та сухоцвітів. Підходить для сучасних інтер\'єрів у стилі скандинавського дизайну.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Монстера створює природний акцент та надає композиції структури. Сансев\'єрія додає вертикальності та сучасності композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Сухоцвіти доповнюють композицію природною красою та гармонією кольорів. Кожна рослина ретельно відібрана за якістю та свіжістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція чудово підходить для сучасних інтер\'єрів у стилі скандинавського дизайну, мінімалізму та еко-стилю. Мінімалістичний підхід створює атмосферу спокою.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням сучасних трендів у квітковому дизайні. Доставляється в спеціальній упаковці для збереження свіжості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція стане ідеальним подарунком для вираження поваги, вдячності та високих почуттів. Мінімалістичний стиль символізує простоту та елегантність.' }]
      }
    ],
    productType: 'composition',
    cardType: 'standart',
    color: 'zelenyj',
    availableQuantity: 12
  },
  {
    name: 'Святкова композиція "Різдво"',
    price: 1400,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Тематична композиція з ялинкових гілок, червоних троянд, шишок та декоративних елементів. Створює святкову атмосферу Різдва.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ялинкові гілки створюють природний акцент та надають композиції святкового вигляду. Червоні троянди додають яскравості та енергії композиції.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Шишки та декоративні елементи доповнюють композицію природною красою та гармонією кольорів. Кожен елемент ретельно відібраний за якістю.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція чудово підходить для святкових подій, Різдва та Нового Року. Святкова атмосфера створює настрій радості та веселості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Композиція оформлена професійними флористами з урахуванням святкових традицій та сучасних трендів у квітковому дизайні. Доставляється в спеціальній упаковці.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Ця композиція стане ідеальним подарунком для вираження святкових почуттів та створення атмосфери Різдва. Святковий стиль символізує радість та весело.' }]
      }
    ],
    productType: 'composition',
    cardType: 'large',
    color: 'chervonij',
    availableQuantity: 5
  }
];

// 10 Одиночних квітів
const singleFlowers = [
  {
    name: 'Червона троянда "Класика"',
    price: 120,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Червона троянда висотою 60-70 см. Символ пристрасті та кохання. Ідеальна для вираження глибоких почуттів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Червоний колір символізує пристрасть, кохання та глибокі почуття.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Троянда ідеально підходить для романтичних моментів, весільних букетів та особливих подій. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Червона троянда стане ідеальним подарунком для вираження глибоких почуттів.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'chervonij',
    availableQuantity: 50
  },
  {
    name: 'Біла троянда "Чистота"',
    price: 110,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Біла троянда висотою 60-70 см. Символ чистоти, невинності та нових початків. Чудово підходить для весільних букетів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Білий колір символізує чистоту, невинність та нові початку.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Троянда ідеально підходить для весільних букетів, офіційних подій та особливих моментів. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Біла троянда стане ідеальним подарунком для вираження поваги та високих почуттів.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'bilyj',
    availableQuantity: 45
  },
  {
    name: 'Рожева троянда "Ніжність"',
    price: 115,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Рожева троянда висотою 60-70 см. Виражає ніжність, вдячність та симпатію. Ідеальна для дружніх та романтичних жестів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Рожевий колір символізує ніжність, кохання та турботу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Троянда ідеально підходить для романтичних моментів, весільних букетів та особливих подій. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Рожева троянда стане ідеальним подарунком для вираження ніжності та кохання.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'rozhevyj',
    availableQuantity: 48
  },
  {
    name: 'Жовта троянда "Радість"',
    price: 105,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Жовта троянда висотою 60-70 см. Символ дружби, радості та оптимізму. Чудовий вибір для підняття настрою.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Жовтий колір символізує дружбу, радість та оптимізм.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Троянда ідеально підходить для днів народження, ювілеїв та просто для підняття настрою. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Жовта троянда стане ідеальним подарунком для вираження дружби та радості.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'zhyovtyj',
    availableQuantity: 42
  },
  {
    name: 'Оранжева троянда "Енергія"',
    price: 108,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Оранжева троянда висотою 60-70 см. Насичений колір символізує енергію, ентузіазм та пристрасть до життя.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Оранжевий колір символізує енергію, ентузіазм та пристрасть до життя.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Троянда ідеально підходить для днів народження, ювілеїв та просто для підняття настрою. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Оранжева троянда стане ідеальним подарунком для вираження енергії та ентузіазму.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'oranzhevyj',
    availableQuantity: 40
  },
  {
    name: 'Біла лілія "Велично"',
    price: 95,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Біла лілія висотою 70-80 см. Вишукана та ароматна квітка, символ чистоти та величі. Чудово доповнює будь-який букет.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Білий колір символізує чистоту, невинність та велич.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Лілія ідеально підходить для весільних букетів, офіційних подій та особливих моментів. Квітка має неперевершений аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Біла лілія стане ідеальним подарунком для вираження поваги та високих почуттів.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'bilyj',
    availableQuantity: 35
  },
  {
    name: 'Червона гербера "Сонце"',
    price: 85,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Червона гербера діаметром 10-12 см. Яскрава та життєрадісна квітка, що нагадує сонце. Довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Червоний колір символізує пристрасть, кохання та енергію.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Гербера ідеально підходить для днів народження, ювілеїв та просто для підняття настрою. Квітка має яскравий вигляд та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Червона гербера стане ідеальним подарунком для вираження радості та енергії.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'chervonij',
    availableQuantity: 60
  },
  {
    name: 'Рожева орхідея "Екзотика"',
    price: 350,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Рожева орхідея фаленопсіс у горщику. Екзотична квітка, що цвіте до 3 місяців. Ідеальна для подарунку та прикраси інтер\'єру.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Орхідея ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Рожевий колір символізує ніжність, кохання та елегантність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Орхідея ідеально підходить для подарунку та прикраси інтер\'єру. Квітка має екзотичний вигляд та довго цвіте до 3 місяців.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Орхідея доставляється в спеціальній упаковці для збереження свіжості. Рожева орхідея стане ідеальним подарунком для вираження ніжності та елегантності.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Орхідея потребує особливого догляду: помірне освітлення, регулярний полив та підтримка вологості. При правильному догляді квітка буде радувати своєю красою довгий час.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'rozhevyj',
    availableQuantity: 20
  },
  {
    name: 'Біла хризантема "Класика"',
    price: 70,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Біла хризантема діаметром 8-10 см. Класична квітка, що символізує довголіття та щастя. Відмінно стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Білий колір символізує чистоту, невинність та щастя.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Хризантема ідеально підходить для весільних букетів, офіційних подій та особливих моментів. Квітка має класичний вигляд та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Біла хризантема стане ідеальним подарунком для вираження поваги та високих почуттів.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'bilyj',
    availableQuantity: 55
  },
  {
    name: 'Фіолетова еустома "Ніжність"',
    price: 90,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Фіолетова еустома висотою 50-60 см. Ніжна та вишукана квітка з м\'яким ароматом. Чудово доповнює романтичні букети.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка ретельно відібрана за якістю та свіжістю, щоб забезпечити довготривалу красу. Фіолетовий колір символізує мудрість, духовність та елегантність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Еустома ідеально підходить для романтичних букетів, весільних церемоній та особливих подій. Квітка має ніжний аромат та довго стоїть у вазі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Квітка доставляється в спеціальній упаковці для збереження свіжості. Фіолетова еустома стане ідеальним подарунком для вираження ніжності та елегантності.' }]
      }
    ],
    productType: 'singleflower',
    cardType: 'standart',
    color: 'fioletovij',
    availableQuantity: 38
  }
];

// 10 Супутніх товарів
const accessories = [
  {
    name: 'Добриво для квітів "Флора" 5кг',
    price: 450,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Універсальне мінеральне добриво для квіткових рослин. Містить азот, фосфор та калій у оптимальному співвідношенні. Забезпечує здорове зростання та пишне цвітіння.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво ретельно відібрано за якістю та складом, щоб забезпечити оптимальне живлення рослин. Азот сприяє росту зеленої маси, фосфор - розвитку кореневої системи, калій - цвітінню.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво підходить для всіх видів квіткових рослин: кімнатних, садових та балконних. Легко застосовується та не вимагає спеціальних знань.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво забезпечує здорове зростання рослин та пишне цвітіння. Регулярне застосування покращує загальний стан рослин та підвищує їхню стійкість до хвороб.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво доставляється в спеціальній упаковці для збереження якості. Упаковка 5кг достатня для тривалого використання та економічно вигідна.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 30
  },
  {
    name: 'Горщик керамічний "Елеганс" 20см',
    price: 280,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вишуканий керамічний горщик з дренажними отворами. Підходить для кімнатних рослин та орхідей. Класичний дизайн під будь-який інтер\'єр.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Горщик виготовлений з якісної кераміки, що забезпечує оптимальну циркуляцію повітря та вологості. Дренажні отвори запобігають застою води та забезпечують здорове зростання рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Горщик ідеально підходить для кімнатних рослин та орхідей. Класичний дизайн підкреслює красу рослин та підходить для будь-якого інтер\'єру.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Горщик діаметром 20см забезпечує достатньо місця для росту кореневої системи. Керамічний матеріал сприяє підтримці оптимальної температури та вологості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Горщик доставляється в спеціальній упаковці для збереження цілісності. Класичний дизайн робить його ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 25
  },
  {
    name: 'Грунт універсальний "Родючий" 10л',
    price: 180,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Якісний універсальний грунт на основі торфу з додаванням мінеральних речовин. Підходить для більшості кімнатних та садових рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Грунт ретельно відібрано за якістю та складом, щоб забезпечити оптимальне живлення рослин. Торф забезпечує хорошу структуру та водопроникність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Грунт підходить для більшості кімнатних та садових рослин. Мінеральні речовини забезпечують необхідні поживні елементи для здорового росту.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Грунт забезпечує здорове зростання рослин та пишне цвітіння. Регулярне використання покращує загальний стан рослин та підвищує їхню стійкість до хвороб.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Грунт доставляється в спеціальній упаковці для збереження якості. Упаковка 10л достатня для тривалого використання та економічно вигідна.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 40
  },
  {
    name: 'Вазон декоративний "Модерн" 25см',
    price: 320,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Сучасний декоративний вазон з міцного пластику. Легкий та міцний, з дренажною системою. Підходить для садових та кімнатних рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вазон виготовлений з якісного пластику, що забезпечує довготривалу експлуатацію та стійкість до погодних умов. Дренажна система запобігає застою води.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вазон ідеально підходить для садових та кімнатних рослин. Сучасний дизайн підкреслює красу рослин та підходить для будь-якого інтер\'єру.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вазон діаметром 25см забезпечує достатньо місця для росту кореневої системи. Легкий вага робить його зручним для транспортування та переміщення.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Вазон доставляється в спеціальній упаковці для збереження цілісності. Сучасний дизайн робить його ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 20
  },
  {
    name: 'Розпилювач для рослин 1л',
    price: 150,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Зручний розпилювач з регульованим розпиленням. Ідеальний для поливу та підживлення рослин, створення оптимальної вологості.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Розпилювач виготовлений з якісних матеріалів, що забезпечують довготривалу експлуатацію. Регульоване розпилення дозволяє налаштувати інтенсивність поливу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Розпилювач ідеально підходить для поливу та підживлення рослин, створення оптимальної вологості. Об\'єм 1л достатній для тривалого використання.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Розпилювач забезпечує рівномірний полив рослин та створює оптимальну вологість. Регулярне використання покращує загальний стан рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Розпилювач доставляється в спеціальній упаковці для збереження цілісності. Зручний дизайн робить його ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 35
  },
  {
    name: 'Садовий інвентар "Комплект"',
    price: 550,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Комплект садового інвентаря: совок, грабельки, міні-мотика. Зручні ручки та міцні сталеві леза. Необхідний набір для догляду за рослинами.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Інвентар виготовлений з якісних матеріалів, що забезпечують довготривалу експлуатацію. Сталеві леза забезпечують міцність та надійність.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Комплект включає всі необхідні інструменти для догляду за рослинами: совок для пересадки, грабельки для розпушування грунту, міні-мотика для обробки.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Зручні ручки забезпечують комфортну роботу та зменшують втому. Інвентар ідеально підходить для догляду за кімнатними та садовими рослинами.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Комплект доставляється в спеціальній упаковці для збереження цілісності. Необхідний набір робить його ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 15
  },
  {
    name: 'Підживлювач для орхідей 250мл',
    price: 220,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Спеціалізоване рідке добриво для орхідей. Збалансований склад для здорового росту та тривалого цвітіння. Легко застосовується.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво ретельно відібрано за якістю та складом, щоб забезпечити оптимальне живлення орхідей. Збалансований склад забезпечує здорове зростання та тривале цвітіння.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво підходить для всіх видів орхідей. Легко застосовується та не вимагає спеціальних знань. Регулярне застосування покращує загальний стан рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво забезпечує здорове зростання орхідей та тривале цвітіння. Об\'єм 250мл достатній для тривалого використання та економічно вигідний.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво доставляється в спеціальній упаковці для збереження якості. Спеціалізований склад робить його ідеальним подарунком для любителів орхідей.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 28
  },
  {
    name: 'Підставка для квітів "Підвісна"',
    price: 380,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Металева підвісна підставка для квіткових горщиків. Витримує вагу до 5кг. Сучасний дизайн, легко монтується до стелі або стіни.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка виготовлена з якісного металу, що забезпечує довготривалу експлуатацію та стійкість до навантажень. Витримує вагу до 5кг, що достатньо для більшості горщиків.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка ідеально підходить для квіткових горщиків. Сучасний дизайн підкреслює красу рослин та підходить для будь-якого інтер\'єру.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка легко монтується до стелі або стіни. Простий монтаж не вимагає спеціальних знань та інструментів. Підставка забезпечує надійне кріплення горщиків.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка доставляється в спеціальній упаковці для збереження цілісності. Сучасний дизайн робить її ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 18
  },
  {
    name: 'Корм для квітів "Довготривале" 500г',
    price: 190,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Гранульоване довготривале добриво для квіткових рослин. Поступово віддає поживні речовини протягом 3 місяців. Зручне у застосуванні.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво ретельно відібрано за якістю та складом, щоб забезпечити оптимальне живлення рослин. Гранульована форма забезпечує поступове віддання поживних речовин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво підходить для всіх видів квіткових рослин. Поступове віддання поживних речовин протягом 3 місяців забезпечує тривале живлення рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво забезпечує здорове зростання рослин та пишне цвітіння. Зручне застосування не вимагає спеціальних знань та інструментів.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Добриво доставляється в спеціальній упаковці для збереження якості. Упаковка 500г достатня для тривалого використання та економічно вигідна.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 32
  },
  {
    name: 'Декоративна підставка "Дерево"',
    price: 420,
    description: [
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Екологічна підставка з натурального дерева для квіткових горщиків. Підкреслює природну красу рослин. Підходить для інтер\'єру в еко-стилі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка виготовлена з якісного натурального дерева, що забезпечує довготривалу експлуатацію та екологічність. Дерев\'яний матеріал підкреслює природну красу рослин.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка ідеально підходить для квіткових горщиків. Екологічний дизайн підкреслює красу рослин та підходить для інтер\'єру в еко-стилі.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка забезпечує надійне розміщення горщиків та підкреслює природну красу рослин. Дерев\'яний матеріал створює теплу та затишну атмосферу.' }]
      },
      {
        type: 'paragraph',
        children: [{ type: 'text', text: 'Підставка доставляється в спеціальній упаковці для збереження цілісності. Екологічний дизайн робить її ідеальним подарунком для любителів рослин.' }]
      }
    ],
    productType: 'else',
    cardType: 'standart',
    color: null,
    availableQuantity: 22
  }
];

// Generate slug from name (handles Ukrainian characters and special symbols)
function generateSlug(name) {
  // Transliterate Ukrainian characters
  const translitMap = {
    'а': 'a', 'б': 'b', 'в': 'v', 'г': 'h', 'ґ': 'g', 'д': 'd', 'е': 'e', 'є': 'ie',
    'ж': 'zh', 'з': 'z', 'и': 'y', 'і': 'i', 'ї': 'i', 'й': 'i', 'к': 'k', 'л': 'l',
    'м': 'm', 'н': 'n', 'о': 'o', 'п': 'p', 'р': 'r', 'с': 's', 'т': 't', 'у': 'u',
    'ф': 'f', 'х': 'kh', 'ц': 'ts', 'ч': 'ch', 'ш': 'sh', 'щ': 'shch', 'ь': '', 'ю': 'iu', 'я': 'ia'
  };
  
  let slug = name.toLowerCase();
  
  // Replace Ukrainian characters
  slug = slug.split('').map(char => translitMap[char] || char).join('');
  
  // Remove quotes and special characters, keep only letters, numbers, spaces, and hyphens
  slug = slug
    .replace(/["'«»]/g, '') // Remove quotes
    .replace(/[^\w\s-]/g, '') // Remove special characters
    .replace(/\s+/g, '-') // Replace spaces with hyphens
    .replace(/-+/g, '-') // Replace multiple hyphens with single
    .replace(/^-|-$/g, '') // Remove leading/trailing hyphens
    .trim();
  
  // Ensure slug is not empty
  if (!slug || slug === '-') {
    slug = 'product-' + Date.now();
  }
  
  return slug;
}

// Fetch all varieties from Strapi
async function fetchVarieties() {
  try {
    const query = `
      query GetVarieties {
        varieties(pagination: { pageSize: 100 }, sort: "name:asc") {
          documentId
          name
          slug
          createdAt
          updatedAt
          publishedAt
        }
      }
    `;

    console.log(`Fetching varieties from ${STRAPI_URL}/graphql...`);
    
    const response = await fetch(`${STRAPI_URL}/graphql`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${STRAPI_TOKEN}`,
      },
      body: JSON.stringify({ query }),
    });

    if (!response.ok) {
      const text = await response.text();
      console.error(`HTTP error fetching varieties: ${response.status} - ${text}`);
      return [];
    }

    const result = await response.json();
    
    if (result.errors) {
      console.error('GraphQL errors fetching varieties:', JSON.stringify(result.errors, null, 2));
      return [];
    }
    
    const varieties = result.data?.varieties || [];
    console.log(`✓ Found ${varieties.length} varieties`);
    if (varieties.length > 0) {
      console.log('   Varieties:', varieties.map(v => v.name).join(', '));
    }
    
    return varieties;
  } catch (error) {
    console.error('Error fetching varieties:', error.message);
    return [];
  }
}

async function createProduct(product, varieties = []) {
  try {
    // Generate unique slug with timestamp to avoid duplicates
    const baseSlug = generateSlug(product.name);
    const slug = `${baseSlug}-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;

    // Prepare varieties IDs - only for bouquet type products
    // Вибираємо 1-3 випадкові сорти замість всіх
    let varietyIds = [];
    if (product.productType === 'bouquet' && varieties.length > 0) {
      const numVarieties = Math.floor(Math.random() * 3) + 1; // 1-3 сорти
      const shuffled = [...varieties].sort(() => 0.5 - Math.random()); // Перемішуємо
      varietyIds = shuffled.slice(0, numVarieties).map(v => v.documentId);
    }

    // Use REST API instead of GraphQL (more reliable)
    const payload = {
      data: {
        name: product.name,
        slug: slug,
        price: product.price,
        description: product.description, // Додаємо опис
        productType: product.productType,
        cardType: product.cardType,
        ...(product.color && { color: product.color }), // Only include color if it's not null
        availableQuantity: product.availableQuantity,
        ...(varietyIds.length > 0 && { varieties: varietyIds }), // Add varieties if available
        publishedAt: new Date().toISOString() // Publish immediately
      }
    };

    const response = await fetch(`${STRAPI_URL}/api/products`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${STRAPI_TOKEN}`,
      },
      body: JSON.stringify(payload),
    });

    if (!response.ok) {
      const errorText = await response.text();
      console.error(`HTTP error creating ${product.name}: ${response.status} - ${errorText}`);
      return false;
    }

    const result = await response.json();
    
    if (result.error) {
      console.error(`Error creating ${product.name}:`, JSON.stringify(result.error, null, 2));
      return false;
    }
    
    const documentId = result.data?.documentId || result.data?.id;
    
    if (!documentId) {
      console.error(`Error creating ${product.name}: No documentId in response`, JSON.stringify(result, null, 2));
      return false;
    }
    
    // Note: Products are created as drafts. Publish them manually in Strapi Admin if needed.
    const varietiesInfo = varietyIds.length > 0 ? ` (with ${varietyIds.length} varieties)` : '';
    console.log(`✓ Created: ${product.name} (${documentId}) - slug: ${slug}${varietiesInfo}`);
    return true;
  } catch (error) {
    console.error(`Error creating ${product.name}:`, error.message);
    return false;
  }
}

async function createAllProducts() {
  // Fetch varieties first
  console.log('Fetching varieties...');
  const varieties = await fetchVarieties();
  console.log(`Found ${varieties.length} varieties`);
  
  if (varieties.length === 0) {
    console.log('⚠️  Warning: No varieties found. Products will be created without varieties.');
    console.log('   You can add varieties manually in Strapi Admin later.');
  }

  console.log('\nCreating 10 bouquets...');
  for (const product of bouquets) {
    await createProduct(product, varieties);
    await new Promise(resolve => setTimeout(resolve, 500)); // Delay to avoid rate limiting
  }

  console.log('\nCreating 5 compositions...');
  for (const product of compositions) {
    await createProduct(product, varieties); // Compositions don't need varieties, but we pass them anyway
    await new Promise(resolve => setTimeout(resolve, 500));
  }

  console.log('\nCreating 10 single flowers...');
  for (const product of singleFlowers) {
    await createProduct(product, varieties); // Single flowers don't need varieties, but we pass them anyway
    await new Promise(resolve => setTimeout(resolve, 500));
  }

  console.log('\nCreating 10 accessories...');
  for (const product of accessories) {
    await createProduct(product, varieties); // Accessories don't need varieties, but we pass them anyway
    await new Promise(resolve => setTimeout(resolve, 500));
  }

  console.log('\n✅ All products created!');
  if (varieties.length > 0) {
    console.log(`   Note: Varieties were added to bouquet products only.`);
  }
}

// Run the script
if (require.main === module) {
  if (!STRAPI_TOKEN) {
    console.error('❌ Error: STRAPI_API_TOKEN environment variable is not set!');
    console.log('\n📝 To fix this:');
    console.log('1. Open Strapi Admin: http://localhost:1337/admin');
    console.log('2. Go to: Settings → API Tokens → Create new API Token');
    console.log('3. Name: "Product Creator", Token type: Full access');
    console.log('4. Copy the token and add to backend/.env file:');
    console.log('   STRAPI_API_TOKEN=your_token_here');
    console.log('\nOr set it temporarily:');
    console.log('   $env:STRAPI_API_TOKEN="your_token"; npm run create-products');
    process.exit(1);
  }
  
  // Validate token format
  if (STRAPI_TOKEN.length < 50) {
    console.error('⚠️  Warning: Token seems too short. Make sure it\'s a valid API token.');
  }
  
  console.log(`🚀 Creating products using Strapi at ${STRAPI_URL}...`);
  console.log(`   Token: ${STRAPI_TOKEN.substring(0, 20)}...${STRAPI_TOKEN.substring(STRAPI_TOKEN.length - 10)} (${STRAPI_TOKEN.length} chars)\n`);
  
  createAllProducts().catch(console.error);
}

module.exports = { createAllProducts, bouquets, compositions, singleFlowers, accessories };

